# API Specifications & Contracts - Boardroom TEE\n\n## Overview\nComplete API documentation for the Boardroom TEE system including hub endpoints, agent-to-agent communication protocols with attested messaging, frontend integration, and comprehensive error handling.\n\n---\n\n## Hub API Endpoints\n\n### Base Configuration\n```\nBase URL: https://hub-domain:8080\nAuthentication: Bearer token + Client ID\nContent-Type: application/json\nAttestation: Required for all data operations\n```\n\n### 1. Document Management APIs\n\n#### Upload Document\n```http\nPOST /api/v1/documents/upload\nContent-Type: multipart/form-data\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\n```\n\n**Request Body:**\n```json\n{\n  \"file\": \"<binary_file_data>\",\n  \"filename\": \"Q3_budget.xlsx\",\n  \"metadata\": {\n    \"department\": \"finance\",\n    \"upload_source\": \"cfo_dashboard\",\n    \"tags\": [\"budget\", \"quarterly\"]\n  }\n}\n```\n\n**Response (202 Accepted):**\n```json\n{\n  \"status\": \"accepted\",\n  \"upload_id\": \"doc_abc123def456\",\n  \"processing_status\": \"queued\",\n  \"estimated_completion\": \"2025-01-16T14:30:00Z\",\n  \"message\": \"Document queued for processing\"\n}\n```\n\n#### Get Processing Status\n```http\nGET /api/v1/documents/{upload_id}/status\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\n```\n\n**Response:**\n```json\n{\n  \"upload_id\": \"doc_abc123def456\",\n  \"status\": \"processing|completed|failed\",\n  \"progress_percentage\": 75,\n  \"started_at\": \"2025-01-16T10:00:00Z\",\n  \"estimated_completion\": \"2025-01-16T14:30:00Z\",\n  \"result\": {\n    \"document_id\": \"doc_789xyz\",\n    \"categorization\": {\n      \"department\": \"Finance\",\n      \"document_type\": \"Data/Spreadsheet\",\n      \"key_terms\": [\"budget\", \"quarterly\", \"revenue\"],\n      \"confidence_score\": 0.92\n    }\n  },\n  \"error_details\": null\n}\n```\n\n#### Search Documents\n```http\nGET /api/v1/documents/search\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\n```\n\n**Query Parameters:**\n```\ndepartment=finance&document_type=report&keywords=budget&limit=50&offset=0\n```\n\n**Response:**\n```json\n{\n  \"results\": [\n    {\n      \"document_id\": \"doc_789xyz\",\n      \"filename\": \"Q3_budget.xlsx\",\n      \"department\": \"Finance\",\n      \"document_type\": \"Data/Spreadsheet\",\n      \"summary\": \"Q3 budget analysis with variance reporting\",\n      \"upload_date\": \"2025-01-16T10:00:00Z\",\n      \"processed_date\": \"2025-01-16T14:30:00Z\",\n      \"confidence_score\": 0.92\n    }\n  ],\n  \"total_count\": 127,\n  \"page\": 1,\n  \"per_page\": 50\n}\n```\n\n### 2. Agent Management APIs\n\n#### Register Agent\n```http\nPOST /api/v1/agents/register\nContent-Type: application/json\nX-Attestation-Quote: {base64_encoded_quote}\nX-Public-Key: {agent_public_key}\n```\n\n**Request Body:**\n```json\n{\n  \"agent_id\": \"finance-agent-client123\",\n  \"agent_type\": \"finance\",\n  \"client_id\": \"client123\",\n  \"endpoint\": \"https://finance-agent:8081\",\n  \"attestation_endpoint\": \"https://finance-agent:29344\",\n  \"capabilities\": [\n    \"financial_analysis\",\n    \"budget_planning\", \n    \"roi_calculation\"\n  ],\n  \"attestation_data\": {\n    \"quote\": \"base64_encoded_attestation_quote\",\n    \"public_key\": \"agent_public_key_pem\",\n    \"certificate_fingerprint\": \"cert_fingerprint\"\n  }\n}\n```\n\n**Response (201 Created):**\n```json\n{\n  \"status\": \"registered\",\n  \"agent_id\": \"finance-agent-client123\",\n  \"verification_status\": \"verified\",\n  \"registered_at\": \"2025-01-16T15:00:00Z\",\n  \"attestation_expires\": \"2025-01-16T19:00:00Z\",\n  \"hub_public_key\": \"hub_public_key_for_agent_verification\"\n}\n```\n\n#### Get Agent Discovery Info\n```http\nGET /api/v1/agents/discovery/{agent_id}\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\nX-Requesting-Agent: {requesting_agent_id}\n```\n\n**Response:**\n```json\n{\n  \"agent_id\": \"marketing-agent-client123\",\n  \"agent_type\": \"marketing\",\n  \"status\": \"verified\",\n  \"endpoint\": \"https://marketing-agent:8082\",\n  \"attestation_endpoint\": \"https://marketing-agent:29345\",\n  \"capabilities\": [\"campaign_analysis\", \"customer_segmentation\"],\n  \"attestation_info\": {\n    \"quote\": \"current_attestation_quote\",\n    \"public_key\": \"agent_public_key_pem\",\n    \"verified_at\": \"2025-01-16T15:00:00Z\",\n    \"expires_at\": \"2025-01-16T19:00:00Z\"\n  },\n  \"network_info\": {\n    \"direct_communication_enabled\": true,\n    \"preferred_protocol\": \"https\"\n  }\n}\n```\n\n### 3. Agent Orchestration APIs\n\n#### Route Collaboration Request\n```http\nPOST /api/v1/orchestration/route\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\nX-Requesting-Agent: {agent_id}\nX-Attestation-Signature: {request_signature}\n```\n\n**Request Body:**\n```json\n{\n  \"query\": \"I need marketing ROI analysis for Q4 holiday campaign\",\n  \"requesting_agent\": \"finance-agent-client123\",\n  \"context\": {\n    \"budget_constraints\": \"$500K maximum\",\n    \"timeframe\": \"Q4 2024\",\n    \"priority\": \"high\"\n  },\n  \"data_requirements\": [\n    \"campaign_performance_data\",\n    \"customer_acquisition_costs\"\n  ]\n}\n```\n\n**Response:**\n```json\n{\n  \"routing_id\": \"route_456def789\",\n  \"workflow_type\": \"sequential\",\n  \"estimated_time_minutes\": 8,\n  \"agents\": [\n    {\n      \"agent_id\": \"marketing-agent-client123\",\n      \"task\": \"Analyze Q4 holiday campaign ROI and performance metrics\",\n      \"priority\": 1,\n      \"estimated_duration_minutes\": 5,\n      \"data_provided\": {\n        \"encrypted_data_package\": \"base64_encrypted_data\",\n        \"encryption_method\": \"agent_public_key\"\n      },\n      \"communication_method\": \"direct_attested\"\n    }\n  ],\n  \"reasoning\": \"Marketing agent best positioned to provide ROI analysis\",\n  \"conflict_resolution\": \"finance_priority\",\n  \"routed_at\": \"2025-01-16T16:00:00Z\"\n}\n```\n\n### 4. Attestation Discovery APIs\n\n#### Get All Verified Agents\n```http\nGET /api/v1/discovery/agents\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\n```\n\n**Response:**\n```json\n{\n  \"verified_agents\": [\n    {\n      \"agent_id\": \"finance-agent-client123\",\n      \"agent_type\": \"finance\",\n      \"status\": \"verified\",\n      \"last_verified\": \"2025-01-16T15:30:00Z\",\n      \"attestation_expires\": \"2025-01-16T19:30:00Z\"\n    },\n    {\n      \"agent_id\": \"marketing-agent-client123\",\n      \"agent_type\": \"marketing\", \n      \"status\": \"verified\",\n      \"last_verified\": \"2025-01-16T15:25:00Z\",\n      \"attestation_expires\": \"2025-01-16T19:25:00Z\"\n    }\n  ],\n  \"total_agents\": 2,\n  \"verification_summary\": {\n    \"verified\": 2,\n    \"unverified\": 0,\n    \"expired\": 0\n  },\n  \"last_updated\": \"2025-01-16T16:00:00Z\"\n}\n```\n\n#### Log Attestation Event\n```http\nPOST /api/v1/discovery/log-event\nX-Requesting-Agent: {agent_id}\nX-Attestation-Signature: {event_signature}\n```\n\n**Request Body:**\n```json\n{\n  \"event_type\": \"agent_verification|communication_attempt|verification_failure\",\n  \"requesting_agent\": \"finance-agent-client123\",\n  \"target_agent\": \"marketing-agent-client123\",\n  \"verification_result\": \"success|failed\",\n  \"timestamp\": \"2025-01-16T16:05:00Z\",\n  \"details\": {\n    \"verification_time_ms\": 245,\n    \"attestation_method\": \"direct_verification\",\n    \"error_code\": null\n  }\n}\n```\n\n**Response (201 Created):**\n```json\n{\n  \"event_logged\": true,\n  \"log_id\": \"log_789abc123\",\n  \"timestamp\": \"2025-01-16T16:05:00Z\"\n}\n```\n\n---\n\n## Agent-to-Agent Communication Protocols\n\n### Attested Messaging Framework\n\n#### 1. Agent Collaboration Request\n```http\nPOST /api/v1/collaborate\nHost: {target-agent-endpoint}\nContent-Type: application/json\nX-Requesting-Agent: {requesting_agent_id}\nX-Attestation-Quote: {requesting_agent_attestation}\nX-Attestation-Signature: {message_signature}\nX-Public-Key: {requesting_agent_public_key}\n```\n\n**Request Body:**\n```json\n{\n  \"collaboration_id\": \"collab_123abc456\",\n  \"task\": {\n    \"type\": \"roi_analysis\",\n    \"description\": \"Analyze ROI for Q4 holiday marketing campaign\",\n    \"parameters\": {\n      \"campaign_id\": \"holiday_2024_q4\",\n      \"budget_limit\": \"$500K\",\n      \"timeframe\": \"2024-10-01 to 2024-12-31\"\n    }\n  },\n  \"data_context\": {\n    \"requesting_department\": \"finance\",\n    \"priority\": \"high\",\n    \"deadline\": \"2025-01-17T12:00:00Z\"\n  },\n  \"encrypted_data\": {\n    \"package\": \"base64_encrypted_data_for_target_agent\",\n    \"encryption_method\": \"target_agent_public_key\",\n    \"data_types\": [\"budget_data\", \"financial_constraints\"]\n  },\n  \"response_requirements\": {\n    \"format\": \"structured_analysis\",\n    \"encryption_required\": true,\n    \"attestation_required\": true\n  }\n}\n```\n\n#### 2. Agent Collaboration Response\n```http\nHTTP/1.1 200 OK\nContent-Type: application/json\nX-Responding-Agent: {responding_agent_id}\nX-Attestation-Quote: {responding_agent_attestation}\nX-Attestation-Signature: {response_signature}\nX-Public-Key: {responding_agent_public_key}\n```\n\n**Response Body:**\n```json\n{\n  \"collaboration_id\": \"collab_123abc456\",\n  \"response_id\": \"resp_789def012\",\n  \"status\": \"completed\",\n  \"analysis_result\": {\n    \"roi_metrics\": {\n      \"total_spend\": \"$485K\",\n      \"revenue_generated\": \"$1.2M\",\n      \"roi_percentage\": \"147%\",\n      \"customer_acquisition_cost\": \"$85\",\n      \"lifetime_value\": \"$450\"\n    },\n    \"performance_analysis\": {\n      \"best_performing_channel\": \"email_marketing\",\n      \"channel_breakdown\": {\n        \"email\": {\"spend\": \"$150K\", \"roi\": \"220%\"},\n        \"social_ads\": {\"spend\": \"$200K\", \"roi\": \"135%\"},\n        \"search_ads\": {\"spend\": \"$135K\", \"roi\": \"98%\"}\n      }\n    },\n    \"recommendations\": [\n      \"Increase email marketing budget for Q1\",\n      \"Optimize search ad targeting to improve ROI\",\n      \"Consider reducing social ad spend\"\n    ]\n  },\n  \"confidence_score\": 0.91,\n  \"processing_time_seconds\": 12,\n  \"data_sources_used\": [\n    \"campaign_performance_metrics\",\n    \"customer_conversion_data\",\n    \"attribution_analysis\"\n  ],\n  \"encrypted_detailed_data\": {\n    \"package\": \"base64_encrypted_detailed_analysis\",\n    \"encryption_method\": \"requesting_agent_public_key\"\n  },\n  \"attestation_verification\": {\n    \"requesting_agent_verified\": true,\n    \"verification_timestamp\": \"2025-01-16T16:10:00Z\",\n    \"verification_method\": \"direct_attestation\"\n  },\n  \"completed_at\": \"2025-01-16T16:15:00Z\"\n}\n```\n\n#### 3. Agent Status Check\n```http\nGET /api/v1/status\nHost: {target-agent-endpoint}\nX-Requesting-Agent: {requesting_agent_id}\nX-Attestation-Signature: {request_signature}\n```\n\n**Response:**\n```json\n{\n  \"agent_id\": \"marketing-agent-client123\",\n  \"status\": \"online\",\n  \"attestation_status\": \"verified\",\n  \"current_load\": {\n    \"active_collaborations\": 2,\n    \"queue_length\": 1,\n    \"estimated_response_time_seconds\": 15\n  },\n  \"capabilities\": {\n    \"available\": [\"campaign_analysis\", \"customer_segmentation\"],\n    \"temporarily_unavailable\": []\n  },\n  \"last_attestation_refresh\": \"2025-01-16T15:25:00Z\",\n  \"attestation_expires\": \"2025-01-16T19:25:00Z\"\n}\n```\n\n---\n\n## Frontend API Integration\n\n### Authentication & Session Management\n\n#### User Login\n```http\nPOST /api/v1/auth/login\nContent-Type: application/json\n```\n\n**Request Body:**\n```json\n{\n  \"email\": \"cfo@company.com\",\n  \"password\": \"secure_password\",\n  \"client_id\": \"client123\",\n  \"mfa_token\": \"123456\"\n}\n```\n\n**Response:**\n```json\n{\n  \"access_token\": \"jwt_access_token\",\n  \"refresh_token\": \"jwt_refresh_token\",\n  \"expires_in\": 3600,\n  \"user_info\": {\n    \"user_id\": \"user_456\",\n    \"name\": \"John Smith\",\n    \"role\": \"cfo\",\n    \"permissions\": [\"view_financial_data\", \"access_all_agents\"]\n  },\n  \"client_info\": {\n    \"client_id\": \"client123\",\n    \"company_name\": \"Acme Corp\",\n    \"subscription_tier\": \"premium\"\n  }\n}\n```\n\n### Executive Dashboard APIs\n\n#### Get Dashboard Overview\n```http\nGET /api/v1/dashboard/overview\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\n```\n\n**Response:**\n```json\n{\n  \"client_info\": {\n    \"company_name\": \"Acme Corp\",\n    \"subscription_tier\": \"premium\",\n    \"data_processing_status\": \"up_to_date\"\n  },\n  \"agent_status\": {\n    \"available_agents\": [\n      {\n        \"agent_type\": \"finance\",\n        \"status\": \"online\",\n        \"attestation_verified\": true,\n        \"last_used\": \"2025-01-16T14:30:00Z\"\n      },\n      {\n        \"agent_type\": \"marketing\",\n        \"status\": \"online\", \n        \"attestation_verified\": true,\n        \"last_used\": \"2025-01-16T15:45:00Z\"\n      }\n    ],\n    \"total_agents\": 4,\n    \"verified_agents\": 4\n  },\n  \"recent_activity\": [\n    {\n      \"timestamp\": \"2025-01-16T15:45:00Z\",\n      \"activity\": \"Marketing ROI analysis completed\",\n      \"user\": \"John Smith (CFO)\",\n      \"agents_involved\": [\"finance\", \"marketing\"]\n    }\n  ],\n  \"data_summary\": {\n    \"total_documents\": 1247,\n    \"last_upload\": \"2025-01-16T10:30:00Z\",\n    \"processing_queue\": 3\n  }\n}\n```\n\n#### Chat with Agent\n```http\nPOST /api/v1/chat/agent/{agent_type}\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\nX-User-ID: {user-id}\n```\n\n**Request Body:**\n```json\n{\n  \"message\": \"What was our customer acquisition cost for Q4?\",\n  \"conversation_id\": \"conv_123abc\",\n  \"context\": {\n    \"department\": \"finance\",\n    \"user_role\": \"cfo\",\n    \"priority\": \"normal\"\n  },\n  \"collaboration_preferences\": {\n    \"allow_cross_agent_collaboration\": true,\n    \"max_response_time_minutes\": 10\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"response_id\": \"resp_789def\",\n  \"conversation_id\": \"conv_123abc\",\n  \"responding_agent\": \"marketing\",\n  \"message\": \"Based on Q4 campaign data, our customer acquisition cost was $85 per customer, down 12% from Q3. This analysis included data from email marketing ($62 CAC), social ads ($95 CAC), and search ads ($118 CAC).\",\n  \"collaboration_summary\": {\n    \"agents_consulted\": [\"marketing\", \"finance\"],\n    \"data_sources\": [\"campaign_metrics\", \"financial_records\"],\n    \"processing_time_seconds\": 8\n  },\n  \"supporting_data\": {\n    \"chart_data\": {\n      \"cac_trend\": {\n        \"Q2\": 98,\n        \"Q3\": 97,\n        \"Q4\": 85\n      }\n    },\n    \"detailed_breakdown\": \"Available upon request\"\n  },\n  \"attestation_verified\": true,\n  \"confidence_score\": 0.94,\n  \"timestamp\": \"2025-01-16T16:20:00Z\"\n}\n```\n\n### Attestation Monitoring (Secondary Page)\n\n#### Get Attestation Status\n```http\nGET /api/v1/attestation/status\nAuthorization: Bearer {token}\nX-Client-ID: {client-id}\n```\n\n**Response:**\n```json\n{\n  \"overall_status\": \"verified\",\n  \"last_verification\": \"2025-01-16T16:00:00Z\",\n  \"attestation_summary\": {\n    \"total_components\": 5,\n    \"verified_components\": 5,\n    \"expired_attestations\": 0,\n    \"failed_verifications\": 0\n  },\n  \"component_details\": [\n    {\n      \"component_type\": \"hub\",\n      \"component_id\": \"boardroom-hub-client123\",\n      \"status\": \"verified\",\n      \"attestation_data\": {\n        \"mrtd\": \"ba87a347454466680bfd267446df89d8117c04ea9f28234dd3d84e1a8a957d5adaf02d4aa88433b559fb13bd40f0109e\",\n        \"rtmr0\": \"090cb75d89b6fc13e37816f76b1ee1eb4c52fb9aae2b161b70982e87c41ae62e37fd285f9d0c597140305736748d5f7f\",\n        \"verification_timestamp\": \"2025-01-16T16:00:00Z\",\n        \"expires_at\": \"2025-01-16T20:00:00Z\"\n      }\n    },\n    {\n      \"component_type\": \"agent\",\n      \"component_id\": \"finance-agent-client123\",\n      \"agent_type\": \"finance\",\n      \"status\": \"verified\",\n      \"attestation_data\": {\n        \"mrtd\": \"[finance_agent_mrtd]\",\n        \"rtmr0\": \"[finance_agent_rtmr0]\",\n        \"verification_timestamp\": \"2025-01-16T15:30:00Z\",\n        \"expires_at\": \"2025-01-16T19:30:00Z\"\n      }\n    }\n  ],\n  \"verification_log\": [\n    {\n      \"timestamp\": \"2025-01-16T16:00:00Z\",\n      \"event\": \"Routine attestation verification completed\",\n      \"components_verified\": 5,\n      \"verification_time_ms\": 1250\n    }\n  ],\n  \"compliance_info\": {\n    \"last_audit\": \"2025-01-15T09:00:00Z\",\n    \"next_scheduled_verification\": \"2025-01-16T20:00:00Z\",\n    \"compliance_status\": \"compliant\"\n  }\n}\n```\n\n---\n\n## Error Handling & Status Codes\n\n### Standard HTTP Status Codes\n\n#### Success Responses\n- **200 OK**: Request successful, returning data\n- **201 Created**: Resource created successfully\n- **202 Accepted**: Request accepted for processing\n- **204 No Content**: Request successful, no content returned\n\n#### Client Error Responses\n- **400 Bad Request**: Invalid request format or parameters\n- **401 Unauthorized**: Authentication required or invalid\n- **403 Forbidden**: Insufficient permissions\n- **404 Not Found**: Resource not found\n- **409 Conflict**: Resource conflict (e.g., duplicate agent registration)\n- **422 Unprocessable Entity**: Valid request format but invalid data\n- **429 Too Many Requests**: Rate limit exceeded\n\n#### Server Error Responses\n- **500 Internal Server Error**: Unexpected server error\n- **502 Bad Gateway**: Agent communication failure\n- **503 Service Unavailable**: Service temporarily unavailable\n- **504 Gateway Timeout**: Agent response timeout\n\n### Custom Error Response Format\n\n#### Standard Error Structure\n```json\n{\n  \"error\": {\n    \"code\": \"ATTESTATION_VERIFICATION_FAILED\",\n    \"message\": \"Agent attestation verification failed\",\n    \"details\": \"The requesting agent's attestation quote could not be verified against expected measurements\",\n    \"timestamp\": \"2025-01-16T16:30:00Z\",\n    \"request_id\": \"req_123abc456\",\n    \"support_info\": {\n      \"documentation_url\": \"https://docs.boardroom-tee.com/errors/attestation\",\n      \"contact_support\": \"support@boardroom-tee.com\"\n    }\n  },\n  \"context\": {\n    \"agent_id\": \"finance-agent-client123\",\n    \"verification_attempt\": 2,\n    \"expected_mrtd\": \"ba87a347...\",\n    \"received_mrtd\": \"different_hash...\"\n  }\n}\n```\n\n### Domain-Specific Error Codes\n\n#### Attestation Errors\n- **ATTESTATION_VERIFICATION_FAILED**: Agent attestation verification failed\n- **ATTESTATION_EXPIRED**: Agent attestation has expired\n- **ATTESTATION_INVALID_FORMAT**: Attestation quote format invalid\n- **ATTESTATION_SIGNATURE_INVALID**: Attestation signature verification failed\n- **AGENT_NOT_VERIFIED**: Target agent not in verified registry\n\n#### Agent Communication Errors\n- **AGENT_OFFLINE**: Target agent not responding\n- **AGENT_OVERLOADED**: Agent at capacity, try again later\n- **COLLABORATION_TIMEOUT**: Agent collaboration request timed out\n- **DIRECT_COMMUNICATION_FAILED**: Direct agent-to-agent communication failed\n- **ENCRYPTION_FAILED**: Message encryption/decryption failed\n\n#### Document Processing Errors\n- **DOCUMENT_TOO_LARGE**: File exceeds maximum size limit\n- **UNSUPPORTED_FILE_TYPE**: File type not supported for processing\n- **PROCESSING_QUEUE_FULL**: Processing queue at capacity\n- **CATEGORIZATION_FAILED**: LLM categorization failed\n- **EXTRACTION_FAILED**: Content extraction from file failed\n\n#### Authentication & Authorization Errors\n- **CLIENT_NOT_FOUND**: Client ID not found in system\n- **SUBSCRIPTION_EXPIRED**: Client subscription has expired\n- **INSUFFICIENT_PERMISSIONS**: User lacks required permissions\n- **AGENT_ACCESS_DENIED**: User not authorized for requested agent\n- **RATE_LIMIT_EXCEEDED**: API rate limit exceeded for client\n\n### Error Response Examples\n\n#### Attestation Verification Failure\n```json\n{\n  \"error\": {\n    \"code\": \"ATTESTATION_VERIFICATION_FAILED\",\n    \"message\": \"Agent attestation verification failed\",\n    \"details\": \"MRTD measurement mismatch detected\",\n    \"timestamp\": \"2025-01-16T16:30:00Z\",\n    \"request_id\": \"req_789def012\"\n  },\n  \"context\": {\n    \"agent_id\": \"finance-agent-client123\",\n    \"expected_mrtd\": \"ba87a347454466680bfd267446df89d8\",\n    \"received_mrtd\": \"different_measurement_hash\",\n    \"verification_method\": \"direct_attestation\"\n  },\n  \"resolution\": {\n    \"immediate_action\": \"Agent must re-register with valid attestation\",\n    \"retry_after_seconds\": 300\n  }\n}\n```\n\n#### Agent Communication Timeout\n```json\n{\n  \"error\": {\n    \"code\": \"COLLABORATION_TIMEOUT\",\n    \"message\": \"Agent collaboration request timed out\",\n    \"details\": \"Marketing agent did not respond within 30 seconds\",\n    \"timestamp\": \"2025-01-16T16:35:00Z\",\n    \"request_id\": \"req_456ghi789\"\n  },\n  \"context\": {\n    \"requesting_agent\": \"finance-agent-client123\",\n    \"target_agent\": \"marketing-agent-client123\",\n    \"collaboration_id\": \"collab_123abc456\",\n    \"timeout_seconds\": 30\n  },\n  \"resolution\": {\n    \"immediate_action\": \"Retry request or contact marketing agent administrator\",\n    \"fallback_option\": \"Request can be routed through hub proxy\"\n  }\n}\n```\n\n#### Document Processing Error\n```json\n{\n  \"error\": {\n    \"code\": \"EXTRACTION_FAILED\",\n    \"message\": \"Content extraction from file failed\",\n    \"details\": \"PDF file appears to be corrupted or password protected\",\n    \"timestamp\": \"2025-01-16T16:40:00Z\",\n    \"request_id\": \"req_012jkl345\"\n  },\n  \"context\": {\n    \"upload_id\": \"doc_abc123def456\",\n    \"filename\": \"corrupted_report.pdf\",\n    \"file_size_bytes\": 2547892,\n    \"mime_type\": \"application/pdf\"\n  },\n  \"resolution\": {\n    \"immediate_action\": \"Please re-upload file or provide password if protected\",\n    \"supported_formats\": [\"PDF\", \"DOCX\", \"XLSX\", \"CSV\", \"TXT\"]\n  }\n}\n```\n\n---\n\n## Rate Limiting & Throttling\n\n### Rate Limits by Endpoint Type\n\n#### Document Operations\n- **Upload**: 10 requests/minute per client\n- **Search**: 60 requests/minute per client\n- **Status Check**: 120 requests/minute per client\n\n#### Agent Operations\n- **Agent Registration**: 5 requests/minute per agent\n- **Discovery Queries**: 100 requests/minute per client\n- **Collaboration Requests**: 30 requests/minute per agent\n\n#### Dashboard/Frontend\n- **Dashboard Data**: 60 requests/minute per user\n- **Chat Interactions**: 20 requests/minute per user\n- **Attestation Status**: 30 requests/minute per client\n\n### Rate Limit Headers\n```http\nX-RateLimit-Limit: 60\nX-RateLimit-Remaining: 45\nX-RateLimit-Reset: 1642345200\nX-RateLimit-Window: 60\n```\n\n### Rate Limit Exceeded Response\n```json\n{\n  \"error\": {\n    \"code\": \"RATE_LIMIT_EXCEEDED\",\n    \"message\": \"API rate limit exceeded\",\n    \"details\": \"Maximum 60 requests per minute exceeded for dashboard endpoints\",\n    \"timestamp\": \"2025-01-16T16:45:00Z\"\n  },\n  \"rate_limit_info\": {\n    \"limit\": 60,\n    \"window_seconds\": 60,\n    \"retry_after_seconds\": 15,\n    \"reset_at\": \"2025-01-16T16:46:00Z\"\n  }\n}\n```\n\n---\n\n## Security Headers & Requirements\n\n### Required Security Headers\n\n#### For All Requests\n```http\nStrict-Transport-Security: max-age=31536000; includeSubDomains\nX-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-XSS-Protection: 1; mode=block\nContent-Security-Policy: default-src 'self'\n```\n\n#### For Attested Communication\n```http\nX-Attestation-Quote: {base64_encoded_attestation}\nX-Attestation-Signature: {request_signature}\nX-Public-Key: {sender_public_key}\nX-Timestamp: {unix_timestamp}\nX-Nonce: {unique_request_nonce}\n```\n\n### Attestation Signature Generation\n```python\n# Pseudocode for signature generation\nrequest_payload = {\n    \"method\": \"POST\",\n    \"url\": \"/api/v1/collaborate\",\n    \"timestamp\": unix_timestamp,\n    \"nonce\": unique_nonce,\n    \"body_hash\": sha256(request_body)\n}\n\nsignature = sign_with_private_key(\n    data=json.dumps(request_payload, sort_keys=True),\n    private_key=agent_private_key\n)\n```\n\n---\n\n*Last Updated: [Current Date]*  \n*Related: distributed_attestation_plan.md, hub_data_processing.md, agent_collaboration.md*\n*Version: 1.0*